<!DOCTYPE html>
<html>

<head>
    <%- include('base/head') %>
        <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
    <header>
        <%- include('base/header') %>
    </header>
    <div class="container">

        <div class="page-header text-center">
            <h1><span class="fa fa-book fa-fw"></span> Ledger Editor
		</h1>


        <button class="btn btn-info btn-lg" data-toggle="modal" data-target="#addtx"><span class="fa fa-plus">Add transaction</span></button>
        <button class="btn btn-info btn-lg" data-toggle="modal" data-target="#addwoff"><span class="fa fa-plus">Add write-off</span></button>
    
        </div>

       
            <ul class="nav nav-pills">
                <li class="nav-item"><a id="e1" href="#">Show transactions</a></li>
                <li class="nav-item"><a id="e2" href="#">Show write-off entries</a></li>
            </ul>
            <div id="tt">
            <h1 class="text-center">TRANSACTIONS ENTITY</h1><br>
                <table id="example1" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th data-name="tx_id">Transaction ID</th>
                                <th data-name="tx_type">Transaction Type</th>
                                <th data-name="cashier_address">Cashier Address</th>
                                <th data-name="amount">Amount</th>
                                <th data-name="description">Description</th>
                                <th data-name="timestamp">Timestamp</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th data-name="tx_id">Transaction ID</th>
                                <th data-name="tx_type">Transaction Type</th>
                                <th data-name="cashier_address">Cashier Address</th>
                                <th data-name="amount">Amount</th>
                                <th data-name="description">Description</th>
                                <th data-name="timestamp">Timestamp</th>
                            </tr>
                        </tfoot>
                </table>
            </div>

            <div id="wt" style="display : none; ">
            <h1 class="text-center">WRITE-OFF ENTITY</h1><br>
                <table id="example2" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <div id='tab2'>
                            <thead>
                                <tr>
                                    <th data-name="tx_id">Writeoff ID</th>
                                    <th data-name="tx_type">Transaction ID</th>
                                    <th data-name="cashier_address">Cashier Address</th>
                                    <th data-name="description">Description</th>
                                    <th data-name="timestamp">Timestamp</th>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <th data-name="tx_id">Writeoff ID</th>
                                    <th data-name="tx_type">Transaction ID</th>
                                    <th data-name="cashier_address">Cashier Address</th>
                                    <th data-name="description">Description</th>
                                    <th data-name="timestamp">Timestamp</th>
                                </tr>
                            </tfoot>
                            
                    </div>
                </table>
            </div>
            


    </div>
   
    <!-- add tx modal -->

<div class="modal fade bs-example-modal-lg" id="addtx" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    Create a new transaction.
                </h4>
            </div>
            
            <!-- Modal Body -->
            <div class="modal-body">
                
                <form class="form-horizontal" role="form">
                  
                  <div class="form-group">
                    <label  class="col-sm-2 control-label" for="tx_type">Tx Type</label>
                    <div class="col-sm-10">
                        <select class="form-control" id="tx_type">
                          <option value="0">Income</option>
                          <option value="1">Expense</option>
                        </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label  class="col-sm-2 control-label" for="cashier_address">Cashier Add</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="cashier_address" placeholder="Cashier Add"/>
                    </div>
                  </div>
                  <div class="form-group">
                    <label  class="col-sm-2 control-label" for="amount">Amount</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="amount" placeholder="Amount"/>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="description">Description</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="description" placeholder="Description"/>
                    </div>
                  </div>
                </form>
                
            </div>
            
            <!-- Modal Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Add</button>
            </div>
        </div>
    </div>
</div>

   <!-- add woff modal -->

<div class="modal fade bs-example-modal-lg" id="addwoff" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    Create a new write-off.
                </h4>
            </div>
            
            <!-- Modal Body -->
            <div class="modal-body">
                
                <form class="form-horizontal" role="form">
                  
                  <div class="form-group">
                    <label  class="col-sm-2 control-label" for="w_tx_id">Tx ID</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="w_tx_id" placeholder="Tx ID"/>
                    </div>
                  </div>
                  <div class="form-group">
                    <label  class="col-sm-2 control-label" for="cashier_address">Cashier Add</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="cashier_address" placeholder="Cashier Add"/>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="description">Description</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="description" placeholder="Description"/>
                    </div>
                  </div>
                </form>
                
            </div>
            
            <!-- Modal Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Add</button>
            </div>
        </div>
    </div>
</div>


    <script type="text/javascript">

        $(document).ready(function() {
            var table1 = $('#example1').dataTable({
                ajax: {
                    url:'/api/txs',
                    dataSrc: ''
                },
                columns: [
                    {data: 'tx_id'},
                    {data: function (source, type, val){
                        return source.tx_type === 0
                        ? 'Income'
                        : 'Expense';
                    }},
                    {data: 'cashier_address'},
                    {data: 'amount'},
                    {data: 'description'},
                    {data: function(source, type, val){
                        var dt = new Date(source.timestamp *1000);
                        return dt.toString();
                    }}
                ]
            });
            
            var table2 = $('#example2').dataTable({
                ajax: {
                    url:'/api/woffs',
                    dataSrc: ''
                },
                columns: [
                    {data: 'writeoff_id'},
                    {data: 'tx_id'},
                    {data: 'cashier_address'},
                    {data: 'description'},
                    {data: function(source, type, val){
                        var dt = new Date(source.timestamp *1000);
                        return dt.toString();
                    }}
                ]
            });
            $("#e1").click(function(){
                $("#wt").hide();
                $("#tt").show();
            })
            $("#e2").click(function(){
                $("#tt").hide();
                $("#wt").show();
            })

            
        });
    </script>

</body>

</html>
