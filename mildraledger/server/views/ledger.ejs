<!DOCTYPE html>
<html>

<head>
    <%- include('base/head') %>
        <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
    <header>
        <%- include('base/header', user); %>
    </header>
    

    
    <div class="container">
        <div class="page-header text-center">
            <h1><span class="fa fa-home fa-fw"></span> Ledger</h1>
        </div>
    </div>
    <div class="col-sm-2 sidebar-main" id="sidebar" role="navigation">
        <ul class="nav sidebar" id="sideul">
            <li class="sideli active"><a data-toggle="tab" href="#txs_detail-tab"><i class="fa fa-file-code-o" aria-hidden="true"></i> Transaction Details</a></li>  
            <li class="sideli"><a data-toggle="tab" href="#data_vis-tab"><i class="fa fa-bar-chart-o" aria-hidden="true"></i> Data Vistulization</a></li>         
        </ul>
    </div>

    <div class="col-sm-10 tab-content">
        <div id="txs_detail-tab" class="tab-pane fade in active">
            <h3>Transactions <a id="refresh-txs" href="#"><i class="fa fa-refresh" aria-hidden="true"></i></a> </h3>
             <table id="txs-woff" class="table table-striped table-bordered" cellspacing="0" width="100%">
                 <thead>
                     <tr>
                         <th data-name="tx_id">Transaction ID</th>
                         <th data-name="tx_type">Transaction Type</th>
                         <th data-name="cashier_address">Cashier Address</th>
                         <th data-name="amount">Amount</th>
                         <th data-name="description">Description</th>
                         <th data-name="timestamp">Timestamp</th>
                         <th data-name="valid">Valid</th>
                     </tr>
                 </thead>
                 <tfoot>
                     <tr>
                         <th data-name="tx_id">Transaction ID</th>
                         <th data-name="tx_type">Transaction Type</th>
                         <th data-name="cashier_address">Cashier Address</th>
                         <th data-name="amount">Amount</th>
                         <th data-name="description">Description</th>
                         <th data-name="timestamp">Timestamp</th>
                         <th data-name="valid">Valid</th>
                     </tr>
                 </tfoot>
                 <tbody></tbody>
             </table>
        </div>
        <div id="data_vis-tab" class="tab-pane fade">
            data_vis
        </div>
    </div>

    <script type="text/javascript">

    $(document).ready(function() {

        var txsTable = $('#txs-woff').dataTable({
            order: [[ 0, "desc" ]],
            ajax: {
                url:'/api/txs',
                dataSrc: ''
            },
            columns: [
                {data: 'tx_id'},
                {data: function (source, type, val) {
                    return source.tx_type === 0
                    ? 'Income'
                    : 'Expense';
                }},
                {data: 'cashier_address'},
                {data: 'amount'},
                {data: 'description'},
                {data: function(source, type, val) {
                    var dt = new Date(source.timestamp);
                    return dt.toString();
                } },
                {data: function (source, type, val) {
                    return source.valid;
                }}
            ]
        });
    });
   
</script>
</body>

</html>
